<div class="dashboard-wrapper">
  <div class="container-fluid dashboard-content">
    <div class="col-xl-12">
      <div class="page-header" id="top">
        <div class="card">
          <div class="progress-loader" *ngIf="loader">
            <div class="loading-spinner">
              <img src="assets/images/loader.svg" alt="Loading...">
            </div>
          </div>
          <h5 class="card-header">Change Password</h5>
          <div class="card-body">
            <form [formGroup]="form" (ngSubmit)="changePassword()">
              <div class="row">
                <!-- Old Password Field -->
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                  <div class="form-group">
                    <label for="opassword">Old Password</label>
                    <input id="opassword" type="password" formControlName="opassword" placeholder="Enter Old Password" autocomplete="off" class="form-control">
                    <small *ngIf="form.controls['opassword'].invalid && form.controls['opassword'].touched" class="text-danger support-text">
                      Old Password is required.
                    </small>
                  </div>
                </div>

                <!-- New Password Field -->
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                  <div class="form-group">
                    <label for="password">New Password 
                      <span (click)="togglePasswordVisibility()">
                        <i class="fa" [ngClass]="{'fa-eye': show, 'fa-eye-slash': !show}"></i>
                      </span>
                    </label>
                    <input id="password" [type]="show ? 'text' : 'password'" formControlName="password" placeholder="Enter New Password" autocomplete="off" class="form-control">
                    <small *ngIf="form.controls['password'].invalid && form.controls['password'].touched" class="text-danger support-text">
                      Password is required and must be at least 6 characters.
                    </small>
                  </div>
                </div>

                <!-- Repeat Password Field -->
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                  <div class="form-group">
                    <label for="rpassword">Repeat Password 
                      <span (click)="toggleRepeatPasswordVisibility()">
                        <i class="fa" [ngClass]="{'fa-eye': repeatshow, 'fa-eye-slash': !repeatshow}"></i>
                      </span>
                    </label>
                    <input id="rpassword" [type]="repeatshow ? 'text' : 'password'" formControlName="rpassword" (change)="passwordMatch()" placeholder="Repeat New Password" autocomplete="off" class="form-control">
                    <small *ngIf="form.controls['rpassword'].invalid && form.controls['rpassword'].touched" class="text-danger support-text">
                      Repeat Password is required and must match the new password.
                    </small>
                    <div *ngIf="isCheked" class="text-danger" style="text-align: center; font-size: 11px;">
                      {{errorMsg}}
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Submit Button -->
              <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                <button class="btn btn-primary" style="float: right;" [disabled]="!form.valid" type="submit">Submit</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
